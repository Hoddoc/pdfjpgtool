
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OAuth Test Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .btn {
            display: inline-block;
            padding: 12px 24px;
            margin: 10px;
            background: #2E5D4B;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        .btn:hover {
            background: #1e3d2b;
        }
        .error {
            background: #ffe6e6;
            color: #d00;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .success {
            background: #e6ffe6;
            color: #060;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .info {
            background: #e6f3ff;
            color: #0066cc;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .token {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            word-break: break-all;
            margin: 10px 0;
        }
        .url-box {
            background: #f8f8f8;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            border: 1px solid #ddd;
            margin: 5px 0;
            word-break: break-all;
        }
        .step {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #2E5D4B;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>OAuth ì„¤ì • ë¬¸ì œ í•´ê²° ê°€ì´ë“œ</h1>
        
        <div class="error">
            <strong>í˜„ì¬ ë¬¸ì œ:</strong><br>
            DNS_PROBE_FINISHED_NXDOMAIN ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” OAuth ì•±ì—ì„œ ì˜¬ë°”ë¥¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ URIê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
        </div>

        <div class="info">
            <strong>í˜„ì¬ ì„œë²„ ì •ë³´:</strong><br>
            - ì„œë²„ URL: <code>https://3310ffde-0425-4fd5-97c8-2cf58ee38cff.id.replit.app</code><br>
            - Dropbox ì½œë°±: <code>https://3310ffde-0425-4fd5-97c8-2cf58ee38cff.id.replit.app/dropbox/callback</code><br>
            - Google ì½œë°±: <code>https://3310ffde-0425-4fd5-97c8-2cf58ee38cff.id.replit.app/google/callback</code>
        </div>

        <h2>ğŸ”§ í•„ìˆ˜ í•´ê²° ë‹¨ê³„</h2>
        
        <div class="step">
            <h3>1ë‹¨ê³„: Dropbox ì•± ì„¤ì • ìˆ˜ì •</h3>
            <p>1. <a href="https://www.dropbox.com/developers/apps" target="_blank">Dropbox Developers Console</a> ì ‘ì†</p>
            <p>2. ì•± <strong>ox2nxs1balk4l4i</strong> ì„ íƒ</p>
            <p>3. "OAuth 2" ì„¹ì…˜ì—ì„œ <strong>ê¸°ì¡´ ë¦¬ë‹¤ì´ë ‰íŠ¸ URIë¥¼ ëª¨ë‘ ì‚­ì œ</strong></p>
            <p>4. ìƒˆë¡œìš´ ë¦¬ë‹¤ì´ë ‰íŠ¸ URI ì¶”ê°€:</p>
            <div class="url-box">https://3310ffde-0425-4fd5-97c8-2cf58ee38cff.id.replit.app/dropbox/callback</div>
            <p>5. "Save" ë˜ëŠ” "ì €ì¥" í´ë¦­</p>
        </div>

        <div class="step">
            <h3>2ë‹¨ê³„: Google OAuth ì•± ì„¤ì • ìˆ˜ì •</h3>
            <p>1. <a href="https://console.cloud.google.com/apis/credentials" target="_blank">Google Cloud Console</a> ì ‘ì†</p>
            <p>2. OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID <strong>330202967434-9u0gnm9ud2f3oasfp0npn6br4h93qs8i</strong> ì„ íƒ</p>
            <p>3. "ìŠ¹ì¸ëœ ë¦¬ë””ë ‰ì…˜ URI"ì—ì„œ <strong>ê¸°ì¡´ URIë¥¼ ëª¨ë‘ ì‚­ì œ</strong></p>
            <p>4. ìƒˆë¡œìš´ ë¦¬ë””ë ‰ì…˜ URI ì¶”ê°€:</p>
            <div class="url-box">https://3310ffde-0425-4fd5-97c8-2cf58ee38cff.id.replit.app/google/callback</div>
            <p>5. "ì €ì¥" í´ë¦­</p>
        </div>

        <div class="step">
            <h3>3ë‹¨ê³„: ì„¤ì • ì™„ë£Œ í›„ í…ŒìŠ¤íŠ¸</h3>
            <p>ìœ„ ì„¤ì •ì„ ì™„ë£Œí•œ í›„ ì•„ë˜ ë²„íŠ¼ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”:</p>
            <button class="btn" onclick="testDropbox()">Dropbox OAuth í…ŒìŠ¤íŠ¸</button>
            <button class="btn" onclick="testGoogle()">Google OAuth í…ŒìŠ¤íŠ¸</button>
        </div>
        
        <div id="results"></div>

        <div class="info">
            <h3>âš ï¸ ì¤‘ìš” ì‚¬í•­</h3>
            <ul>
                <li><strong>ê¸°ì¡´ .repl.co ë„ë©”ì¸ì„ ë°˜ë“œì‹œ ì‚­ì œí•´ì•¼ í•©ë‹ˆë‹¤</strong></li>
                <li>ìƒˆë¡œìš´ .id.replit.app ë„ë©”ì¸ë§Œ ì¶”ê°€í•˜ì„¸ìš”</li>
                <li>ì„¤ì • ë³€ê²½ í›„ ìµœëŒ€ 10ë¶„ê¹Œì§€ ì ìš© ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
                <li>ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ì§€ìš°ê³  ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”</li>
            </ul>
        </div>
    </div>

    <script>
        function testDropbox() {
            const results = document.getElementById('results');
            results.innerHTML = '<div class="info">Dropbox OAuth í…ŒìŠ¤íŠ¸ ì¤‘...</div>';
            
            const popup = window.open('https://3310ffde-0425-4fd5-97c8-2cf58ee38cff.id.replit.app/auth/dropbox', 'dropbox_test', 'width=600,height=700');
            
            const messageHandler = (event) => {
                if (event.data.type === 'dropbox_auth_success') {
                    results.innerHTML = `
                        <div class="success">
                            <strong>âœ… Dropbox OAuth ì„±ê³µ!</strong><br>
                            Access Token: <div class="token">${event.data.token}</div>
                        </div>
                    `;
                    window.removeEventListener('message', messageHandler);
                } else if (event.data.type === 'dropbox_auth_error') {
                    results.innerHTML = `
                        <div class="error">
                            <strong>âŒ Dropbox OAuth ì‹¤íŒ¨:</strong><br>
                            ${event.data.error}
                        </div>
                    `;
                    window.removeEventListener('message', messageHandler);
                }
            };
            
            window.addEventListener('message', messageHandler);
        }

        function testGoogle() {
            const results = document.getElementById('results');
            results.innerHTML = '<div class="info">Google OAuth í…ŒìŠ¤íŠ¸ ì¤‘...</div>';
            
            const popup = window.open('https://3310ffde-0425-4fd5-97c8-2cf58ee38cff.id.replit.app/auth/google', 'google_test', 'width=600,height=700');
            
            const messageHandler = (event) => {
                if (event.data.type === 'google_auth_success') {
                    results.innerHTML = `
                        <div class="success">
                            <strong>âœ… Google OAuth ì„±ê³µ!</strong><br>
                            Access Token: <div class="token">${event.data.token}</div>
                            ${event.data.refresh_token ? `<br>Refresh Token: <div class="token">${event.data.refresh_token}</div>` : ''}
                        </div>
                    `;
                    window.removeEventListener('message', messageHandler);
                } else if (event.data.type === 'google_auth_error') {
                    results.innerHTML = `
                        <div class="error">
                            <strong>âŒ Google OAuth ì‹¤íŒ¨:</strong><br>
                            ${event.data.error}
                        </div>
                    `;
                    window.removeEventListener('message', messageHandler);
                }
            };
            
            window.addEventListener('message', messageHandler);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ìƒíƒœ í™•ì¸
        window.addEventListener('load', function() {
            const results = document.getElementById('results');
            results.innerHTML = `
                <div class="info">
                    <strong>ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸:</strong><br>
                    1. Dropbox ì•±ì—ì„œ ê¸°ì¡´ URI ì‚­ì œ í›„ ìƒˆ URI ì¶”ê°€ âœï¸<br>
                    2. Google OAuth ì•±ì—ì„œ ê¸°ì¡´ URI ì‚­ì œ í›„ ìƒˆ URI ì¶”ê°€ âœï¸<br>
                    3. ì„¤ì • ì €ì¥ ë° í…ŒìŠ¤íŠ¸ ì§„í–‰ â³
                </div>
            `;
        });
    </script>
</body>
</html>
