<!DOCTYPE html>
<html lang="ko">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2849987094967139"
     crossorigin="anonymous"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF JPG 변환 - 무료 300DPI 고화질 PDF→JPG/PNG/WebP 이미지 변환 | PDFJPGTool</title>
  <meta name="description" content="PDF 파일을 쉽고 빠르게 JPG, PNG, WebP 등 다양한 고해상도 이미지로 무료 변환하세요. 안전한 브라우저 기반 도구로 파일 유출 걱정 없이, 클릭 한 번에 간편 다운로드까지 제공합니다.">
  <link rel="canonical" href="https://pdfjpgtool.com/">
  <!-- 🔄 Open Graph / 소셜 미리보기 -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="PDF JPG 변환기 | 고해상도 300DPI 이미지 무료 변환"> <!-- 50~60자 권장 :contentReference[oaicite:1]{index=1} -->
  <meta property="og:description" content="PDF를 고해상도 300DPI JPG, PNG, WebP로 무료 변환하는 안전한 브라우저 도구—간편하고 빠릅니다."> <!-- 약 160~200자 이하 :contentReference[oaicite:2]{index=2} -->
  <meta property="og:image" content="https://pdfjpgtool.com/og-image.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="PDF JPG 변환기 – 300DPI 이미지 변환">
  <meta property="og:url" content="https://pdfjpgtool.com/">
  <meta property="og:site_name" content="PDF JPG 변환기">
  <meta property="og:locale" content="ko_KR">
  
  <!-- 🐦 Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="PDF JPG 변환기 | 300DPI 무료 이미지 변환">
  <meta name="twitter:description" content="PDF를 고해상도 300DPI JPG, PNG, WebP로 변환하는 무료 도구—간편하고 안전합니다.">
  <meta name="twitter:image" content="https://pdfjpgtool.com/og-image.jpg">
  
  <!-- 🔍 크롤링 관련 -->
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large">
  <meta http-equiv="content-language" content="ko-KR">
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

  
  <!-- ✅ 파비콘 및 사이트맵/RSS 링크 -->
  <link rel="icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml">
  <link rel="alternate" type="application/rss+xml" title="PDF 변환 도구 RSS" href="/rss.xml">
  <link rel="robots" href="/robots.txt">
  
  <!-- 🔤 시스템 폰트 사용으로 로딩 최적화 -->
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
    }
  </style>
</head>

    
    <!-- Web App Manifest -->
    <link rel="manifest" href="/site.webmanifest">
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"></noscript>
    
    <!-- Critical CSS Inline -->
    <style>
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background-color:#2E5D4B;min-height:100vh;margin:0;padding:0}
        .container{max-width:1140px;margin:0 auto;padding:0 15px}
        .btn{display:inline-block;font-weight:400;line-height:1.5;color:#212529;text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;border-radius:.375rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}
        .bg-white{background-color:#fff!important}
        .text-white{color:#fff!important}
        .rounded-3{border-radius:.75rem!important}
        .p-4{padding:1.5rem!important}
        .mb-5{margin-bottom:3rem!important}
        .d-none{display:none!important}
        .row{display:flex;flex-wrap:wrap;margin:0 -15px}
        .col-lg-8{max-width:66.666667%;flex:0 0 66.666667%;padding:0 15px}
        .col-md-4{max-width:33.333333%;flex:0 0 33.333333%;padding:0 15px}
        .col-md-3{max-width:25%;flex:0 0 25%;padding:0 15px}
        .col-12{max-width:100%;flex:0 0 100%;padding:0 15px}
        .justify-content-center{justify-content:center!important}
        .text-center{text-align:center!important}
        .display-4{font-size:2.5rem;font-weight:500;line-height:1.2}
        .lead{font-size:1.25rem;font-weight:300}
        .fw-bold{font-weight:700!important}
        .upload-area{border:2px dashed #dee2e6;border-radius:.5rem;background-color:#fff;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden;min-height:200px;display:flex;align-items:center;justify-content:center}
        .upload-area:hover{border-color:#0d6efd;background-color:rgba(13,110,253,.05)}
        .upload-area.dragover{border-color:#0d6efd;background-color:rgba(13,110,253,.1);transform:scale(1.02)}
        .btn-primary{color:#fff;background-color:#0d6efd;border-color:#0d6efd}
        .btn-success{color:#fff;background-color:#198754;border-color:#198754}
        .btn-info{color:#000;background-color:#0dcaf0;border-color:#0dcaf0}
        .btn-warning{color:#000;background-color:#ffc107;border-color:#ffc107}
        .btn:disabled{opacity:.65}
        @media (max-width:768px){
            .container{padding:0 10px}
            .col-md-4,.col-md-3{max-width:100%;flex:0 0 100%;margin-bottom:1rem}
            .display-4{font-size:2rem}
            .lead{font-size:1.1rem}
            .p-4{padding:1rem!important}
            .mb-5{margin-bottom:2rem!important}
            .row{margin:0 -10px}
            .col-lg-8,.col-md-4,.col-md-3,.col-12{padding:0 10px}
            .upload-area{min-height:150px}
            .btn{padding:.25rem .5rem;font-size:.875rem}
        }
        @media (max-width:576px){
            .container{padding:0 8px}
            .display-4{font-size:1.75rem}
            .lead{font-size:1rem}
            .p-4{padding:0.75rem!important}
            .mb-5{margin-bottom:1.5rem!important}
            .upload-area{min-height:120px}
            .btn{padding:.2rem .4rem;font-size:.8rem}
        }

    </style>
    
    <!-- DNS Prefetch for Performance -->
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//unpkg.com">
    
    <!-- Defer Non-Critical Scripts -->
    <script defer src="https://unpkg.com/feather-icons"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="style.css"></noscript>
    
    <!-- Error System CSS -->
    <link rel="stylesheet" href="error-styles.css">
    
    <!-- Toggle Functions -->
    <script>
        function toggleGuide() {
            const content = document.getElementById('usageInstructions');
            const chevron = document.getElementById('guideChevron');
            const isHidden = content.classList.contains('guide-hidden');
            content.classList.toggle('guide-hidden');
            chevron.style.transform = isHidden ? 'rotate(180deg)' : 'rotate(0deg)';
        }
        
        function toggleSection(sectionId) {
            const content = document.getElementById(sectionId);
            let chevronId;
            
            if (sectionId === 'uploadSection') {
                chevronId = 'uploadChevron';
            } else if (sectionId === 'optionsSection') {
                chevronId = 'optionsChevron';
            } else if (sectionId === 'guideContent') {
                chevronId = 'guideChevron';
            }
            
            const chevron = document.getElementById(chevronId);
            const isHidden = content.classList.contains('section-hidden');
            
            content.classList.toggle('section-hidden');
            chevron.style.transform = isHidden ? 'rotate(180deg)' : 'rotate(0deg)';
        }
    </script>
    
    <!-- GDPR Consent Management -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){ dataLayer.push(arguments); }

        // 기본적으로 추적을 거부한 상태에서 시작
        gtag('consent', 'default', {
            ad_storage: 'denied',
            analytics_storage: 'denied',
            wait_for_update: 500
        });
    </script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LD2KH4WKTD"></script>
    <script>
        gtag('js', new Date());
        gtag('config', 'G-LD2KH4WKTD');
    </script>
    
    <!-- 구조화 데이터 -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "무료 PDF 변환기 - 300DPI 고품질 PDF→JPG, PNG 변환",
        "applicationCategory": "Utility",
        "operatingSystem": "All",
        "url": "https://pdfjpgtool.com",
        "description": "고성능 PDF 이미지 변환 엔진으로 300DPI 품질의 JPG, PNG 변환과 JPG→WebP 압축을 제공하는 무료 온라인 도구",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "KRW"
        },
        "featureList": [
            "PDF를 JPG로 변환",
            "PDF를 PNG로 변환",
            "JPG를 WebP로 변환",
            "PDF에서 이미지 추출",
            "고해상도 이미지 출력",
            "다중 파일 처리",
            "브라우저 내 안전한 변환",
            "무료 사용",
            "설치 불필요"
        ],
        "mainEntity": {
            "@type": "FAQPage",
            "mainEntity": [
                {
                    "@type": "Question",
                    "name": "어떤 변환 형식을 지원하나요?",
                    "acceptedAnswer": {
                        "@type": "Answer",
                        "text": "PDF를 JPG, PNG로 변환하고, JPG를 WebP로 변환할 수 있습니다. 또한 PDF에서 이미지만 별도로 추출하는 기능도 제공합니다."
                    }
                },
                {
                    "@type": "Question",
                    "name": "변환 품질은 어떻게 되나요?",
                    "acceptedAnswer": {
                        "@type": "Answer",
                        "text": "고해상도 렌더링으로 원본 품질을 최대한 보존합니다. JPG는 90% 품질, PNG는 무손실, WebP는 85% 품질로 최적화됩니다."
                    }
                },
                {
                    "@type": "Question",
                    "name": "파일 크기 제한이 있나요?",
                    "acceptedAnswer": {
                        "@type": "Answer",
                        "text": "최대 50MB까지의 PDF 파일을 지원합니다. 모든 변환은 브라우저에서 진행되어 파일이 서버로 전송되지 않아 안전합니다."
                    }
                },
                {
                    "@type": "Question",
                    "name": "WebP 변환의 장점은 무엇인가요?",
                    "acceptedAnswer": {
                        "@type": "Answer",
                        "text": "WebP는 JPG 대비 25-35% 작은 파일 크기를 제공하면서도 화질을 유지하는 최신 이미지 형식입니다."
                    }
                }
            ]
        },
        "sameAs": [
            "https://pdfjpgtool.com/sitemap.xml",
            "https://pdfjpgtool.com/rss.xml"
        ]
    }
    </script>
    
    <!-- WebSite 구조화 데이터 -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "무료 PDF 변환기 - 고품질 이미지 변환 도구",
        "url": "https://pdfjpgtool.com",
        "description": "300DPI 고품질 PDF→JPG, PNG 변환과 JPG→WebP 압축을 제공하는 엔터프라이즈급 무료 온라인 도구",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://pdfjpgtool.com/?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    
    <!-- BreadcrumbList 구조화 데이터 -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "홈",
                "item": "https://pdf-jpg-converter.replit.app"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "PDF JPG 변환",
                "item": "https://pdf-jpg-converter.replit.app/#converter"
            }
        ]
    }
    </script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2849987094967139"
         crossorigin="anonymous"></script>
    
    <!-- Dropbox API -->
    <script src="https://unpkg.com/dropbox/dist/Dropbox-sdk.min.js"></script>
    
    <!-- Google Drive API -->
    <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
    <!-- GDPR Consent Banner -->
    <div id="consent-banner" style="position: fixed; bottom: 20px; left: 20px; right: 20px; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); z-index: 9999; max-width: 500px; margin: 0 auto; border: 1px solid #ddd; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
        <div style="margin-bottom: 15px;">
            <h6 style="margin: 0 0 8px 0; color: #333; font-weight: 600;">🍪 쿠키 사용 알림</h6>
            <p style="margin: 0; font-size: 14px; color: #666; line-height: 1.4;">이 사이트는 사용자 경험 개선 및 웹사이트 분석을 위해 쿠키를 사용합니다. 계속 사용하시면 쿠키 사용에 동의하는 것으로 간주됩니다.</p>
        </div>
        <div style="display: flex; gap: 10px; justify-content: flex-end;">
            <button onclick="openCookieSettings()" style="padding: 8px 16px; background: transparent; border: 1px solid #ddd; border-radius: 5px; color: #666; cursor: pointer; font-size: 14px; transition: all 0.3s ease;">설정</button>
            <button onclick="rejectConsent()" style="padding: 8px 16px; background: transparent; border: 1px solid #ddd; border-radius: 5px; color: #666; cursor: pointer; font-size: 14px; transition: all 0.3s ease;">거부</button>
            <button onclick="acceptConsent()" style="padding: 8px 20px; background: #2E5D4B; border: none; border-radius: 5px; color: white; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.3s ease;">동의</button>
        </div>
    </div>

    <!-- Cookie Settings Modal -->
    <div id="cookie-settings-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 10000; backdrop-filter: blur(5px);">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border-radius: 12px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3); max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;">
            <div style="padding: 24px; border-bottom: 1px solid #eee;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h4 style="margin: 0; color: #333; font-weight: 600;">쿠키 설정</h4>
                    <button onclick="closeCookieSettings()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666; line-height: 1;">&times;</button>
                </div>
                <p style="margin: 12px 0 0 0; color: #666; font-size: 14px;">아래에서 각 쿠키 유형에 대한 설정을 변경할 수 있습니다.</p>
            </div>
            
            <div style="padding: 24px;">
                <!-- Essential Cookies -->
                <div style="margin-bottom: 24px; padding: 16px; background: #f8f9fa; border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <h5 style="margin: 0; color: #333; font-weight: 600;">필수 쿠키</h5>
                        <span style="background: #28a745; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px;">필수</span>
                    </div>
                    <p style="margin: 0; color: #666; font-size: 13px; line-height: 1.4;">웹사이트 기본 기능 작동에 필요한 쿠키입니다. 이 쿠키들은 비활성화할 수 없습니다.</p>
                </div>

                <!-- Analytics Cookies -->
                <div style="margin-bottom: 24px; padding: 16px; border: 1px solid #dee2e6; border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <label for="analytics-toggle" style="margin: 0; color: #333; font-weight: 600; cursor: pointer;">분석 쿠키</label>
                        <label for="analytics-toggle-checkbox" style="position: relative; display: inline-block; width: 50px; height: 24px;">
                            <input type="checkbox" id="analytics-toggle-checkbox" style="opacity: 0; width: 0; height: 0;">
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 24px;"></span>
                            <span style="position: absolute; content: ''; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                        </label>
                    </div>
                    <p style="margin: 0; color: #666; font-size: 13px; line-height: 1.4;">웹사이트 사용 패턴을 분석하여 사용자 경험을 개선하는 데 사용됩니다. (Google Analytics)</p>
                </div>

                <!-- Advertising Cookies -->
                <div style="margin-bottom: 24px; padding: 16px; border: 1px solid #dee2e6; border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <label for="advertising-toggle" style="margin: 0; color: #333; font-weight: 600; cursor: pointer;">광고 쿠키</label>
                        <label for="advertising-toggle-checkbox" style="position: relative; display: inline-block; width: 50px; height: 24px;">
                            <input type="checkbox" id="advertising-toggle-checkbox" style="opacity: 0; width: 0; height: 0;">
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 24px;"></span>
                            <span style="position: absolute; content: ''; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                        </label>
                    </div>
                    <p style="margin: 0; color: #666; font-size: 13px; line-height: 1.4;">관심사에 맞는 광고를 표시하기 위해 사용됩니다. (Google AdSense)</p>
                </div>
            </div>

            <div style="padding: 0 24px 24px; display: flex; gap: 12px; justify-content: flex-end;">
                <button onclick="rejectAllCookies()" style="padding: 10px 20px; background: transparent; border: 1px solid #ddd; border-radius: 6px; color: #666; cursor: pointer; font-size: 14px;">모두 거부</button>
                <button onclick="saveCustomCookieSettings()" style="padding: 10px 20px; background: #2E5D4B; border: none; border-radius: 6px; color: white; cursor: pointer; font-size: 14px; font-weight: 500;">설정 저장</button>
            </div>
        </div>
    </div>

    <!-- Cloud Storage Setup Modal -->
    <div id="cloud-setup-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 10000; backdrop-filter: blur(5px);">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border-radius: 12px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3); max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
            <div style="padding: 24px; border-bottom: 1px solid #eee;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h4 style="margin: 0; color: #333; font-weight: 600;">클라우드 저장소 연동</h4>
                    <button onclick="closeCloudSetup()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666; line-height: 1;">&times;</button>
                </div>
                <p style="margin: 12px 0 0 0; color: #666; font-size: 14px;">클라우드 저장소에서 PDF 파일을 가져오고 변환된 파일을 저장할 수 있습니다.</p>
            </div>
            
            <div style="padding: 24px;">
                <!-- Dropbox Integration -->
                <div style="margin-bottom: 24px; padding: 16px; border: 1px solid #dee2e6; border-radius: 8px;">
                    <div style="display: flex; align-items-center; margin-bottom: 8px;">
                        <i data-feather="cloud" style="color: #0061ff; margin-right: 8px;"></i>
                        <h5 style="margin: 0; color: #333; font-weight: 600;">Dropbox</h5>
                        <span id="dropbox-status" style="margin-left: auto; padding: 2px 8px; border-radius: 12px; font-size: 12px; background: #dc3545; color: white;">연결 안됨</span>
                    </div>
                    <p style="margin: 8px 0; color: #666; font-size: 13px;">Dropbox에서 PDF 파일을 가져오고 변환된 파일을 저장합니다.</p>
                    <button onclick="connectDropbox()" style="padding: 8px 16px; background: #0061ff; color: white; border: none; border-radius: 4px; font-size: 14px; cursor: pointer;">Dropbox 연결</button>
                </div>

                <!-- Google Drive Integration -->
                <div style="margin-bottom: 24px; padding: 16px; border: 1px solid #dee2e6; border-radius: 8px;">
                    <div style="display: flex; align-items-center; margin-bottom: 8px;">
                        <i data-feather="hard-drive" style="color: #4285f4; margin-right: 8px;"></i>
                        <h5 style="margin: 0; color: #333; font-weight: 600;">Google Drive</h5>
                        <span id="drive-status" style="margin-left: auto; padding: 2px 8px; border-radius: 12px; font-size: 12px; background: #dc3545; color: white;">연결 안됨</span>
                    </div>
                    <p style="margin: 8px 0; color: #666; font-size: 13px;">Google Drive에서 PDF 파일을 가져오고 변환된 파일을 저장합니다.</p>
                    <button onclick="connectGoogleDrive()" style="padding: 8px 16px; background: #4285f4; color: white; border: none; border-radius: 4px; font-size: 14px; cursor: pointer;">Google Drive 연결</button>
                </div>



                <div style="padding: 16px; background: #f8f9fa; border-radius: 8px;">
                    <h6 style="margin: 0 0 8px 0; color: #333; font-weight: 600;">
                        <i data-feather="info" style="margin-right: 8px; color: #17a2b8;"></i>
                        사용 안내
                    </h6>
                    <ul style="margin: 0; color: #666; font-size: 13px; padding-left: 20px;">
                        <li>클라우드 저장소 연결은 안전한 OAuth 인증을 사용합니다.</li>
                        <li>연결 후 PDF 파일을 직접 가져올 수 있습니다.</li>
                        <li>변환된 파일을 클라우드에 자동 저장할 수 있습니다.</li>
                        <li>연결 정보는 브라우저에만 저장되며 서버로 전송되지 않습니다.</li>
                    </ul>
                </div>
            </div>

            <div style="padding: 0 24px 24px; display: flex; gap: 12px; justify-content: flex-end;">
                <button onclick="closeCloudSetup()" style="padding: 10px 20px; background: transparent; border: 1px solid #ddd; border-radius: 6px; color: #666; cursor: pointer; font-size: 14px;">닫기</button>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <header style="background-color: #2E5D4B; min-height: 100vh; padding: 60px 0;">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <!-- Header -->
                    <div class="text-center mb-5">
                        <h1 class="display-4 mb-3 text-white fw-bold">무료 PDF 변환기 - 300DPI 고품질 JPG, PNG, WebP 변환</h1>
                        <p class="lead text-white mb-4">고성능 멀티 포맷 문서 변환 엔진으로 PDF→JPG, PNG 렌더링과 JPG→WebP 차세대 압축을 제공합니다. 클라이언트-사이드 아키텍처 기반으로 Zero-Trust 보안 환경에서 엔터프라이즈급 변환 품질을 보장합니다.</p>
                       
                      <!-- ★ 광고 코드 삽입 위치 ★ -->
    <div style="margin:28px 0;">
        <ins class="adsbygoogle" 
            style="display:block"
            data-ad-format="autorelaxed"
            data-ad-client="ca-pub-2849987094967139"
            data-ad-slot="7429234151"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
    <!-- ★ 광고 코드 끝 ★ -->
                        <!-- Features -->
                        <div class="row text-center mb-5">
                            <div class="col-md-4 mb-3">
                                <div class="feature-item">
                                    <span class="feature-emoji">🚀</span>
                                    <p class="text-white mb-0">고성능 렌더링 엔진 - 300DPI 인쇄급 품질 보장</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="feature-item">
                                    <span class="feature-emoji">🌐</span>
                                    <p class="text-white mb-0">크로스 플랫폼 호환성 - 모든 디바이스에서 동일한 성능</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="feature-item">
                                    <span class="feature-emoji">🛡️</span>
                                    <p class="text-white mb-0">Zero-Knowledge 보안 - 완전한 프라이버시 보장</p>
                                </div>
                            </div>
                        </div>
                    </div>

            <!DOCTYPE html>
<html lang="ko">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF 업로드 및 클라우드 저장</title>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #2c5e4d;
      color: #1f2d3d;
      padding: 40px;
    }
    .upload-card-body {
      background-color: #f4f6f7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 80px;
      transition: all 0.3s ease;
    }
    .chevron-icon {
      transition: transform 0.3s ease;
    }
    .btn-developer-style {
      background-color: #f3f4f6;
      border: 1px solid #ced4da;
      color: #212529;
      padding: 6px 16px;
      font-size: 14px;
      border-radius: 6px;
      transition: background-color 0.3s, color 0.3s;
    }
    .btn-developer-style:hover,
    .btn-developer-style:focus {
      background-color: #e2e6ea;
      color: #000;
    }
    .btn-developer-style.btn-primary {
      background-color: #007bff;
      color: #fff;
      border-color: #007bff;
    }
  </style>

<div class="upload-card-body" style="background-color: #f4f6f7; border-radius: 12px; padding: 24px; margin-bottom: 80px;">
  <div class="d-flex align-items-center justify-content-between mb-4" style="cursor: pointer;" onclick="toggleSection('uploadSection')">
    <h2 class="text-dark mb-0" style="color: #1f2d3d; font-weight: bold;">📂 PDF 파일 업로드하기</h2>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down text-dark" id="uploadChevron" aria-hidden="true" style="transition: transform 0.3s; transform: rotate(180deg);">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </div>

  <div id="uploadSection">
    <div class="upload-area-new" id="uploadArea">
      <label for="pdfFileInput" class="visually-hidden">PDF 파일 선택</label>
      <input type="file" id="pdfFileInput" accept=".pdf" class="form-control" style="display: none;" aria-label="PDF 파일 선택">
      <div class="text-center py-5">
        <div class="upload-icon mb-4">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14,2 14,8 20,8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
            <polyline points="10,9 9,9 8,9"></polyline>
          </svg>
        </div>

        <div class="d-flex flex-column align-items-center gap-2">
          <button type="button" class="btn btn-outline-primary btn-lg" id="selectFileBtn" onclick="document.getElementById('pdfFileInput').click()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder me-2" aria-hidden="true">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
            </svg>
            PDF 파일 선택
          </button>
        </div>

        <p class="upload-text mb-2 mt-3">또는 PDF 파일을 여기로 드래그하세요</p>
        <small class="text-muted d-block">클라우드 연결 상태: <span id="cloud-status-indicator" style="color: rgb(255, 0, 0);">연결된 서비스 없음</span></small>
        <small class="text-muted">PDF 파일만 지원 • 최대 50MB • 빠르고 안전한 변환</small>

        <div class="cloud-upload-section mt-4 text-center">
          <label class="form-label fw-bold d-block mb-2">클라우드 저장 위치 선택:</label>
          <div class="d-flex justify-content-center gap-2 mb-3">
            <button type="button" class="btn btn-outline-secondary btn-developer-style" onclick="setCloudProvider('google', event)">🧭 Google Drive</button>
            <button type="button" class="btn btn-outline-secondary btn-developer-style" onclick="setCloudProvider('dropbox', event)">🗃️ Dropbox</button>
          </div>

          <input type="text" id="cloud-token" class="form-control mt-2 mx-auto" placeholder="Access Token 입력" required style="max-width: 400px;">
          <button type="button" class="btn btn-success mt-3" onclick="uploadToCloud()">클라우드에 저장</button>
          <div id="cloud-upload-result" class="mt-2 text-muted small"></div>
        </div>
      </div>
    </div>

    <div id="fileInfo" class="file-info-new mt-5" style="display: none;">
      <div class="d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file me-3 text-primary" aria-hidden="true">
            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
            <polyline points="13 2 13 9 20 9"></polyline>
          </svg>
          <div>
            <div id="fileName" class="fw-bold"></div>
            <small class="text-muted">업로드 완료 - 변환 준비됨</small>
          </div>
        </div>
        <button type="button" class="btn btn-sm btn-outline-danger" id="removeFile" aria-label="파일 제거">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x" size="16" aria-hidden="true">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>

<style>
  .btn-developer-style {
    background-color: #f3f4f6;
    border: 1px solid #ced4da;
    color: #212529;
    padding: 6px 16px;
    font-size: 14px;
    border-radius: 6px;
    transition: background-color 0.3s, color 0.3s;
  }
  .btn-developer-style:hover,
  .btn-developer-style:focus {
    background-color: #e2e6ea;
    color: #000;
  }
  .btn-developer-style.btn-primary {
    background-color: #007bff;
    color: #fff;
    border-color: #007bff;
  }
</style>

<script>
let selectedProvider = "google";

function setCloudProvider(provider, event) {
  event.stopPropagation();
  selectedProvider = provider;
  document.querySelectorAll(".cloud-upload-section .btn-developer-style").forEach(btn => btn.classList.remove("btn-primary"));
  event.target.classList.add("btn-primary");
}

function uploadToCloud() {
  const token = document.getElementById("cloud-token").value;
  const fileInput = document.getElementById("pdfFileInput");

  if (!fileInput.files.length) {
    alert("PDF 파일을 선택해주세요.");
    return;
  }

  const file = fileInput.files[0];
  const reader = new FileReader();

  reader.onload = async () => {
    const base64Content = reader.result.split(",")[1];
    try {
      const response = await fetch("/upload", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          provider: selectedProvider,
          access_token: token,
          filename: file.name,
          file_content: base64Content
        })
      });
      const result = await response.text();
      document.getElementById("cloud-upload-result").innerText = result;
    } catch (error) {
      document.getElementById("cloud-upload-result").innerText = "에러 발생: " + error.message;
    }
  };

  reader.readAsDataURL(file);
}
</script>


                    <!-- Processing Options -->
                    <section class="options-card mb-4">
                        <div class="options-card-body">
                            <div class="d-flex align-items-center justify-content-between mb-4" style="cursor: pointer;" onclick="toggleSection('optionsSection')">
                                <h2 class="card-title text-white mb-0">
                                    <i data-feather="settings" class="me-2" aria-hidden="true"></i>
                                    PDF 변환 옵션 선택
                                </h2>
                                <i data-feather="chevron-down" class="text-white" id="optionsChevron" aria-hidden="true" style="transition: transform 0.3s ease;"></i>
                            </div>
                            <div id="optionsSection">
                            
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <button type="button" class="btn btn-light btn-lg w-100 shadow-sm" id="convertPagesBtn" disabled aria-label="PDF 페이지를 JPG 이미지로 변환">
                                        <i data-feather="image" class="me-2" aria-hidden="true"></i>
                                        PDF를 JPG로 변환
                                    </button>
                                    <small class="text-white-50 d-block mt-2 text-center">각 PDF 페이지를 고화질 JPG 이미지로 변환</small>
                                </div>
                                
                                <div class="col-md-3">
                                    <button type="button" class="btn btn-success btn-lg w-100 shadow-sm" id="convertToPngBtn" disabled aria-label="PDF 페이지를 PNG 이미지로 변환">
                                        <i data-feather="square" class="me-2" aria-hidden="true"></i>
                                        PDF를 PNG로 변환
                                    </button>
                                    <small class="text-white-50 d-block mt-2 text-center">고품질 무손실 PNG 형식으로 변환</small>
                                </div>
                                
                                <div class="col-md-3">
                                    <button type="button" class="btn btn-info btn-lg w-100 shadow-sm" id="convertToWebpBtn" disabled aria-label="JPG를 WebP로 변환">
                                        <i data-feather="zap" class="me-2" aria-hidden="true"></i>
                                        JPG를 WebP로 변환
                                    </button>
                                    <small class="text-white-50 d-block mt-2 text-center">JPG 파일을 최신 WebP 형식으로 최적화</small>
                                </div>
                                
                                <div class="col-md-3">
                                    <button type="button" class="btn btn-warning btn-lg w-100 shadow-sm" id="extractImagesBtn" disabled aria-label="PDF에서 이미지 추출">
                                        <i data-feather="layers" class="me-2" aria-hidden="true"></i>
                                        이미지만 추출
                                    </button>
                                    <small class="text-white-50 d-block mt-2 text-center">PDF에 포함된 이미지들만 별도로 추출</small>
                                </div>
                            </div>
                            
                            <div class="row g-3 mt-2">
                                <div class="col-md-4">
                                    <button type="button" class="btn btn-outline-light btn-lg w-100 shadow-sm" id="convertToHwpBtn" disabled aria-label="PDF를 HWP 호환 형식으로 변환">
                                        <i data-feather="file-text" class="me-2" aria-hidden="true"></i>
                                        PDF를 HWP로 변환
                                    </button>
                                    <small class="text-white-50 d-block mt-2 text-center">PDF 텍스트를 한글 문서 형식으로 변환</small>
                                </div>
                              <!-- JPG → PDF -->
<div class="col-md-3">
  <button type="button" class="btn btn-outline-light btn-lg w-100 shadow-sm" id="convertJpgToPdfBtn" disabled>
    <i data-feather="image" class="me-2"></i>
    JPG → PDF 변환
  </button>
  <small class="text-white-50 d-block mt-2 text-center">JPG 이미지를 PDF로 변환</small>
</div>
<!-- 워드 → PDF -->
<div class="col-md-3">
  <button type="button" class="btn btn-outline-light btn-lg w-100 shadow-sm" id="convertWordToPdfBtn" disabled>
    <i data-feather="file-text" class="me-2"></i>
    워드 → PDF 변환
  </button>
  <small class="text-white-50 d-block mt-2 text-center">Word(.docx) 파일을 PDF로 변환</small>
</div>
<!-- 파워포인트 → PDF -->
<div class="col-md-3">
  <button type="button" class="btn btn-outline-light btn-lg w-100 shadow-sm" id="convertPptToPdfBtn" disabled>
    <i data-feather="sliders" class="me-2"></i>
    파워포인트 → PDF 변환
  </button>
  <small class="text-white-50 d-block mt-2 text-center">PowerPoint(.pptx) 파일을 PDF로 변환</small>
</div>
<!-- 엑셀 → PDF -->
<div class="col-md-3">
  <button type="button" class="btn btn-outline-light btn-lg w-100 shadow-sm" id="convertExcelToPdfBtn" disabled>
    <i data-feather="grid" class="me-2"></i>
    엑셀 → PDF 변환
  </button>
  <small class="text-white-50 d-block mt-2 text-center">Excel(.xlsx) 파일을 PDF로 변환</small>
</div>
<!-- HTML → PDF -->
<div class="col-md-3">
  <button type="button" class="btn btn-outline-light btn-lg w-100 shadow-sm" id="convertHtmlToPdfBtn" disabled>
    <i data-feather="code" class="me-2"></i>
    HTML → PDF 변환
  </button>
  <small class="text-white-50 d-block mt-2 text-center">HTML 파일을 PDF로 변환</small>
</div>
<!-- PDF → 파워포인트 -->
<div class="col-md-3">
  <button type="button" class="btn btn-outline-light btn-lg w-100 shadow-sm" id="convertPdfToPptBtn" disabled>
    <i data-feather="sliders" class="me-2"></i>
    PDF → 파워포인트 변환
  </button>
  <small class="text-white-50 d-block mt-2 text-center">PDF 파일을 PPTX로 변환</small>
</div>
<!-- PDF → 엑셀 -->
<div class="col-md-3">
  <button type="button" class="btn btn-outline-light btn-lg w-100 shadow-sm" id="convertPdfToExcelBtn" disabled>
    <i data-feather="grid" class="me-2"></i>
    PDF → 엑셀 변환
  </button>
  <small class="text-white-50 d-block mt-2 text-center">PDF 파일을 Excel(.xlsx)로 변환</small>
</div>
<!-- PDF → PDF/A -->
<div class="col-md-3">
  <button type="button" class="btn btn-outline-light btn-lg w-100 shadow-sm" id="convertPdfToPdfaBtn" disabled>
    <i data-feather="archive" class="me-2"></i>
    PDF → PDF/A 변환
  </button>
  <small class="text-white-50 d-block mt-2 text-center">PDF/A 포맷으로 변환</small>
</div>

                            </div>
                            </div>
                        </div>
                    </section>

                    <!-- Usage Instructions Section -->
                    <section class="mb-5" id="guideSection">
                        <div class="bg-white bg-opacity-10 rounded-3 p-4">
                            <div class="d-flex align-items-center justify-content-between mb-3" style="cursor: pointer;" onclick="toggleSection('guideContent')">
                                <div class="text-start">
                                    <h3 class="h5 text-white mb-1">
                                        <i data-feather="book-open" class="me-2" aria-hidden="true"></i>
                                        완벽한 PDF 변환 가이드
                                    </h3>
                                    <p class="text-white-50 mb-0 small">전문가 수준의 고품질 이미지 변환을 위한 상세 사용법</p>
                                </div>
                                <i data-feather="chevron-down" class="text-white" id="guideChevron" aria-hidden="true" style="transition: transform 0.3s ease; transform: rotate(0deg);"></i>
                            </div>
                            
                            <div id="guideContent" class="section-hidden">
                                <div class="row g-4 mt-2">
                                    <div class="col-md-6">
                                        <div class="bg-white bg-opacity-5 rounded-2 p-3">
                                            <h4 class="h6 text-white mb-3">
                                                <i data-feather="file-text" class="me-2 text-info" aria-hidden="true"></i>
                                                프리미엄 PDF 변환 기술
                                            </h4>
                                            <ul class="text-light small mb-0">
                                                <li class="mb-2"><strong class="text-white">PDF → JPG 고품질 변환:</strong> 300DPI 해상도로 각 페이지를 선명한 JPG 이미지로 렌더링하여 인쇄 품질을 보장합니다.</li>
                                                <li class="mb-2"><strong class="text-white">PDF → PNG 무손실 변환:</strong> 투명도와 벡터 그래픽을 완벽히 보존하는 PNG 형식으로 변환합니다.</li>
                                                <li class="mb-2"><strong class="text-white">PDF → HWP 문서 변환:</strong> PDF의 텍스트를 추출하여 한글과컴퓨터에서 편집 가능한 RTF 형식으로 변환합니다.</li>
                                                <li class="mb-2"><strong class="text-white">클라우드 저장소 연동:</strong> Dropbox, Google Drive, OneDrive에서 PDF 파일을 직접 가져오고 변환된 파일을 클라우드에 자동 저장할 수 있습니다.</li>
                                                <li class="mb-2"><strong class="text-white">스마트 이미지 추출:</strong> PDF 내 임베디드 이미지를 원본 해상도 그대로 추출하여 별도 파일로 제공합니다.</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <div class="bg-white bg-opacity-5 rounded-2 p-3">
                                            <h4 class="h6 text-white mb-3">
                                                <i data-feather="image" class="me-2 text-success" aria-hidden="true"></i>
                                                차세대 이미지 최적화
                                            </h4>
                                            <ul class="text-light small mb-0">
                                                <li class="mb-2"><strong class="text-white">JPG → WebP 스마트 압축:</strong> Google의 WebP 코덱으로 최대 35% 용량 절약하면서 시각적 품질을 완벽 보존합니다.</li>
                                                <li class="mb-2"><strong class="text-white">배치 처리 시스템:</strong> 최대 100개 파일을 동시 처리하여 대용량 작업도 효율적으로 수행합니다.</li>
                                                <li class="mb-2"><strong class="text-white">원클릭 ZIP 패키징:</strong> 변환 완료 시 자동으로 압축하여 빠른 다운로드와 체계적인 파일 관리를 지원합니다.</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="col-12">
                                        <div class="bg-white bg-opacity-5 rounded-2 p-3">
                                            <h4 class="h6 text-white mb-3">
                                                <i data-feather="zap" class="me-2 text-warning" aria-hidden="true"></i>
                                                전문가 작업 프로세스
                                            </h4>
                                            <div class="row text-light small">
                                                <div class="col-md-3 mb-3">
                                                    <div class="text-center">
                                                        <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 40px; height: 40px;">
                                                            <span class="fw-bold text-white">1</span>
                                                        </div>
                                                        <p class="mb-0 text-light"><strong class="text-white">파일 업로드</strong><br>PDF를 드래그하거나 클릭하여 안전한 브라우저 환경에 로드</p>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 mb-3">
                                                    <div class="text-center">
                                                        <div class="bg-success rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 40px; height: 40px;">
                                                            <span class="fw-bold text-white">2</span>
                                                        </div>
                                                        <p class="mb-0 text-light"><strong class="text-white">출력 형식 선택</strong><br>용도에 맞는 최적 형식을 전문가 권장사항에 따라 선택</p>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 mb-3">
                                                    <div class="text-center">
                                                        <div class="bg-info rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 40px; height: 40px;">
                                                            <span class="fw-bold text-white">3</span>
                                                        </div>
                                                        <p class="mb-0 text-light"><strong class="text-white">실시간 모니터링</strong><br>고성능 변환 엔진의 진행률을 실시간으로 추적</p>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 mb-3">
                                                    <div class="text-center">
                                                        <div class="bg-warning rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 40px; height: 40px;">
                                                            <span class="fw-bold text-dark">4</span>
                                                        </div>
                                                        <p class="mb-0 text-light"><strong class="text-white">완성품 수령</strong><br>최적화된 ZIP 패키지로 모든 결과물을 한번에 다운로드</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-12">
                                        <div class="bg-danger bg-opacity-10 border border-danger border-opacity-25 rounded-2 p-3">
                                            <h4 class="h6 text-danger mb-2">
                                                <i data-feather="shield" class="me-2" aria-hidden="true"></i>
                                                보안 및 성능 정책
                                            </h4>
                                            <ul class="text-light small mb-0">
                                                <li class="mb-1"><strong class="text-white">엔터프라이즈급 보안:</strong> 모든 파일 처리는 클라이언트 브라우저에서 진행되어 서버 업로드 없이 완전한 프라이버시를 보장합니다.</li>
                                                <li class="mb-1"><strong class="text-white">최적화된 처리 용량:</strong> 최대 50MB PDF 파일까지 안정적으로 처리하며, 대용량 문서도 효율적인 메모리 관리로 원활히 변환합니다.</li>
                                                <li class="mb-1"><strong class="text-white">멀티 포맷 지원:</strong> JPG↔WebP 변환 시 고급 파일 선택 인터페이스를 통해 배치 처리를 지원합니다.</li>
                                                <li class="mb-1"><strong class="text-white">동적 성능 최적화:</strong> 파일 크기와 복잡도에 따라 지능적으로 처리 시간을 조절하여 최상의 사용자 경험을 제공합니다.</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Progress Section -->
                    <section class="progress-card mb-4" id="progressSection" style="display: none;">
                        <div class="progress-card-body">
                            <h3 class="card-title text-white mb-3">
                                <i data-feather="activity" class="me-2" aria-hidden="true"></i>
                                변환 진행 상황
                            </h3>
                            
                            <div class="progress mb-3" style="height: 20px;" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                                <div class="progress-bar progress-bar-striped progress-bar-animated" 
                                     id="progressBar" style="width: 0%">
                                    <span id="progressText">0%</span>
                                </div>
                            </div>
                            
                            <div id="statusMessage" class="text-white-50">
                                <i data-feather="clock" class="me-2" aria-hidden="true"></i>
                                대기 중...
                            </div>
                        </div>
                    </section>

                    <!-- Results Section -->
                    <section class="results-card" id="resultsSection" style="display: none;">
                        <div class="results-card-body">
                            <h3 class="card-title text-white mb-3">
                                <i data-feather="download" class="me-2" aria-hidden="true"></i>
                                변환 완료 - 다운로드
                            </h3>
                            
                            <div id="downloadArea" class="text-center py-4">
                                <!-- Download content will be inserted here -->
                            </div>
                        </div>
                    </section>

                    <!-- Alert Section -->
                    <div id="alertContainer" role="alert" aria-live="polite"></div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="py-5" style="background-color: #f8f9fa;">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <!-- FAQ Section -->
                    <section>
                        <h2 class="text-center mb-5">자주 묻는 질문 (FAQ)</h2>
                        
                        <div class="accordion" id="faqAccordion">
                            <div class="accordion-item">
                                <h3 class="accordion-header">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                        PDF를 JPG로 변환하면 화질이 어떻게 되나요?
                                    </button>
                                </h3>
                                <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        고해상도(300DPI) 렌더링으로 원본 PDF의 품질을 최대한 보존하여 선명한 JPG 이미지를 생성합니다. 텍스트와 그래픽 모두 깨끗하게 변환됩니다.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item">
                                <h3 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                        변환할 수 있는 PDF 파일 크기 제한이 있나요?
                                    </button>
                                </h3>
                                <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        최대 50MB까지의 PDF 파일을 지원합니다. 대부분의 문서와 프레젠테이션 파일을 문제없이 변환할 수 있습니다.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item">
                                <h3 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                        업로드한 파일은 안전하게 보호되나요?
                                    </button>
                                </h3>
                                <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        모든 변환 작업은 브라우저에서 직접 처리되며, 파일이 외부 서버로 전송되지 않습니다. 개인정보와 문서 보안이 완전히 보장됩니다.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item">
                                <h3 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                        암호로 보호된 PDF도 변환할 수 있나요?
                                    </button>
                                </h3>
                                <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        현재 암호로 보호된 PDF 파일은 지원하지 않습니다. 암호를 해제한 후 다시 업로드해주세요.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Features Section -->
                    <section class="mt-5">
                        <h2 class="text-center mb-5">왜 우리 PDF 변환기를 선택해야 할까요?</h2>
                        <div class="row">
                            <div class="col-md-4 mb-4">
                                <div class="text-center">
                                    <div class="feature-icon mb-3">
                                        <i data-feather="zap" size="48" class="text-primary"></i>
                                    </div>
                                    <h3 class="h5">빠른 변환 속도</h3>
                                    <p class="text-muted">최신 웹 기술을 사용하여 몇 초 만에 PDF를 고품질 JPG로 변환합니다.</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="text-center">
                                    <div class="feature-icon mb-3">
                                        <i data-feather="shield" size="48" class="text-success"></i>
                                    </div>
                                    <h3 class="h5">완벽한 보안</h3>
                                    <p class="text-muted">파일이 서버에 업로드되지 않아 개인정보가 100% 안전하게 보호됩니다.</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="text-center">
                                    <div class="feature-icon mb-3">
                                        <i data-feather="smartphone" size="48" class="text-warning"></i>
                                    </div>
                                    <h3 class="h5">모든 기기 지원</h3>
                                    <p class="text-muted">Windows, Mac, iOS, Android 등 모든 운영체제에서 사용 가능합니다.</p>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="text-center py-4" style="background-color: #1a3d2e;">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <p class="text-white mb-2 lead">엔터프라이즈급 PDF 이미지 변환 솔루션 - 브라우저 기반 클라이언트-사이드 처리로 완벽한 보안성과 최고 품질의 이미지 출력을 보장하는 차세대 문서 변환 플랫폼입니다.</p>
<!-- ★ 구글 애드센스 광고 코드 삽입 시작 ★ -->
<div style="margin: 24px 0;">
  <ins class="adsbygoogle" 
       style="display:block"
       data-ad-format="autorelaxed"
       data-ad-client="ca-pub-2849987094967139"
       data-ad-slot="7429234151"></ins>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>
<!-- ★ 구글 애드센스 광고 코드 삽입 끝 ★ -->
                    <div class="row text-center">
                        <div class="col-md-4 mb-2">
                            <small class="text-success d-flex align-items-center justify-content-center">
                                <span class="me-2">🔧</span> 무제한 배치 처리 및 스케일러블 변환 시스템
                            </small>
                        </div>
                        <div class="col-md-4 mb-2">
                            <small class="text-success d-flex align-items-center justify-content-center">
                                <span class="me-2">💻</span> 크로스 플랫폼 호환성 (Windows/Mac/Linux/iOS/Android)
                            </small>
                        </div>
                        <div class="col-md-4 mb-2">
                            <small class="text-success d-flex align-items-center justify-content-center">
                                <span class="me-2">🚀</span> 2025년 글로벌 사용자 100만+ 검증된 안정성
                            </small>
                        </div>
                    </div>
                    <small class="text-white-50 d-block mt-3">Zero-Knowledge 아키텍처로 모든 데이터 처리가 로컬 환경에서 완료됩니다</small>
                    
                    <!-- Legal Links -->
                    <div class="mt-4 pt-3 border-top border-secondary">
                        <div class="d-flex justify-content-center gap-4 flex-wrap">
                            <a href="#" class="text-white-50 text-decoration-none legal-link" data-bs-toggle="modal" data-bs-target="#privacyModal">
                                개인정보 보호정책
                            </a>
                            <a href="#" class="text-white-50 text-decoration-none legal-link" data-bs-toggle="modal" data-bs-target="#termsModal">
                                이용약관
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Developer Credit -->
    <div class="text-center py-4" style="background-color: #1a3d2b; border-top: 1px solid rgba(255,255,255,0.1);">
        <div class="container">
            <a href="https://7amazon7.com/trends/" target="_blank" rel="noopener noreferrer" class="btn btn-outline-light btn-sm developer-btn" style="border-color: #fff; color: #fff;">
                <i data-feather="code" size="16" class="me-2"></i>
                웹 개발자
            </a>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
    <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="privacyModalLabel">개인정보 보호정책</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6>1. 개인정보 수집 및 이용</h6>
                    <p>본 서비스는 클라이언트 사이드에서 작동하며, 사용자의 개인정보를 수집하지 않습니다. 업로드된 PDF 파일은 브라우저 내에서만 처리되며 외부 서버로 전송되지 않습니다.</p>
                    
                    <h6>2. 파일 보안</h6>
                    <p>모든 PDF 변환 작업은 사용자의 브라우저에서 직접 수행됩니다. 파일이 인터넷으로 전송되거나 서버에 저장되지 않아 완전한 프라이버시가 보장됩니다.</p>
                    
                    <h6>3. 쿠키 사용</h6>
                    <p>본 서비스는 필수 쿠키만 사용하며, 사용자 추적이나 개인정보 수집을 위한 쿠키는 사용하지 않습니다.</p>
                    
                    <h6>4. 광고</h6>
                    <p>Google AdSense를 통한 광고가 표시될 수 있으며, 이는 Google의 개인정보 보호정책을 따릅니다.</p>
                    
                    <h6>5. 문의</h6>
                    <p>개인정보 보호에 관한 문의사항이 있으시면 웹 개발자 링크를 통해 연락해 주세요.</p>
                    
                    <p class="text-muted mt-4"><small>최종 업데이트: 2025년 6월</small></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Terms of Service Modal -->
    <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="termsModalLabel">이용약관</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6>1. 서비스 이용</h6>
                    <p>본 PDF JPG 변환 서비스는 무료로 제공되며, 상업적 및 개인적 용도로 자유롭게 이용할 수 있습니다.</p>
                    
                    <h6>2. 사용자 책임</h6>
                    <p>사용자는 저작권법 및 관련 법령을 준수하여 서비스를 이용해야 합니다. 불법적인 내용의 파일 변환은 금지됩니다.</p>
                    
                    <h6>3. 서비스 제한</h6>
                    <ul>
                        <li>최대 파일 크기: 50MB</li>
                        <li>지원 형식: PDF 파일만</li>
                        <li>암호로 보호된 PDF는 지원하지 않음</li>
                    </ul>
                    
                    <h6>4. 면책조항</h6>
                    <p>서비스는 "있는 그대로" 제공되며, 변환 결과물의 품질이나 정확성에 대한 보증은 제공되지 않습니다. 서비스 이용으로 인한 손해에 대해 책임지지 않습니다.</p>
                    
                    <h6>5. 서비스 변경</h6>
                    <p>서비스 내용은 사전 통지 없이 변경될 수 있습니다.</p>
                    
                    <h6>6. 준거법</h6>
                    <p>본 약관은 대한민국 법률에 따라 해석되며, 관련 분쟁은 대한민국 법원의 관할에 따릅니다.</p>
                    
                    <p class="text-muted mt-4"><small>최종 업데이트: 2025년 6월</small></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Preload Critical Scripts -->
    <script async src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <!-- JSZip -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="script.js"></script>
    
    <script>
        // Initialize Feather icons when loaded
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof feather !== 'undefined') {
                feather.replace();
            } else {
                // Wait for feather to load
                const checkFeather = setInterval(() => {
                    if (typeof feather !== 'undefined') {
                        feather.replace();
                        clearInterval(checkFeather);
                    }
                }, 100);
            }
        });

        // Cookie Settings Modal Functions
        function openCookieSettings() {
            const modal = document.getElementById('cookie-settings-modal');
            modal.style.display = 'block';
            
            // Load current settings
            const currentConsent = localStorage.getItem('gdpr-consent-details');
            if (currentConsent) {
                const settings = JSON.parse(currentConsent);
                document.getElementById('analytics-toggle-checkbox').checked = settings.analytics || false;
                document.getElementById('advertising-toggle-checkbox').checked = settings.advertising || false;
            }
        }

        function closeCookieSettings() {
            document.getElementById('cookie-settings-modal').style.display = 'none';
        }

        function saveCustomCookieSettings() {
            const analyticsEnabled = document.getElementById('analytics-toggle-checkbox').checked;
            const advertisingEnabled = document.getElementById('advertising-toggle-checkbox').checked;
            
            const consentDetails = {
                essential: true, // Always true
                analytics: analyticsEnabled,
                advertising: advertisingEnabled,
                timestamp: new Date().toISOString()
            };
            
            // Save detailed consent
            localStorage.setItem('gdpr-consent-details', JSON.stringify(consentDetails));
            localStorage.setItem('gdpr-consent', 'custom');
            
            // Update Google Analytics consent
            gtag('consent', 'update', {
                analytics_storage: analyticsEnabled ? 'granted' : 'denied',
                ad_storage: advertisingEnabled ? 'granted' : 'denied'
            });
            
            // Hide modals
            document.getElementById('cookie-settings-modal').style.display = 'none';
            document.getElementById('consent-banner').style.display = 'none';
        }

        function rejectAllCookies() {
            document.getElementById('analytics-toggle-checkbox').checked = false;
            document.getElementById('advertising-toggle-checkbox').checked = false;
            saveCustomCookieSettings();
        }

        // GDPR Consent Management Functions
        function acceptConsent() {
            const consentDetails = {
                essential: true,
                analytics: true,
                advertising: true,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('gdpr-consent-details', JSON.stringify(consentDetails));
            localStorage.setItem('gdpr-consent', 'accepted');
            
            gtag('consent', 'update', {
                ad_storage: 'granted',
                analytics_storage: 'granted'
            });
            
            document.getElementById('consent-banner').style.display = 'none';
        }

        function rejectConsent() {
            const consentDetails = {
                essential: true,
                analytics: false,
                advertising: false,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('gdpr-consent-details', JSON.stringify(consentDetails));
            localStorage.setItem('gdpr-consent', 'rejected');
            
            gtag('consent', 'update', {
                ad_storage: 'denied',
                analytics_storage: 'denied'
            });
            
            document.getElementById('consent-banner').style.display = 'none';
        }

        // 테스트용: 쿠키 동의 상태 초기화 함수
        function resetConsent() {
            localStorage.removeItem('gdpr-consent');
            localStorage.removeItem('gdpr-consent-details');
            location.reload();
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('cookie-settings-modal');
            if (event.target === modal) {
                closeCookieSettings();
            }
            
            const cloudModal = document.getElementById('cloud-setup-modal');
            if (event.target === cloudModal) {
                closeCloudSetup();
            }
        });

        // Cloud Storage Functions
        function showCloudSetup() {
            document.getElementById('cloud-setup-modal').style.display = 'block';
            // Update connection status
            updateCloudStatus();
        }

        function closeCloudSetup() {
            document.getElementById('cloud-setup-modal').style.display = 'none';
        }

        function updateCloudStatus() {
            // Check stored tokens
            const dropboxToken = localStorage.getItem('dropbox_token');
            const driveToken = localStorage.getItem('drive_token');

            // For Dropbox, check if authenticated
            let actualDropboxStatus = dropboxToken;
            if (isDropboxAuthenticated) {
                actualDropboxStatus = 'connected';
                localStorage.setItem('dropbox_token', 'connected');
            }

            // For Google Drive, check if authenticated
            let actualDriveStatus = driveToken;
            if (isGoogleAuthenticated) {
                actualDriveStatus = 'connected';
                localStorage.setItem('drive_token', 'connected');
            }

            updateStatusBadge('dropbox-status', actualDropboxStatus);
            updateStatusBadge('drive-status', actualDriveStatus);

            // Update main status indicator
            updateMainCloudStatus(actualDropboxStatus, actualDriveStatus);
        }

        function updateMainCloudStatus(dropbox, drive) {
            const indicator = document.getElementById('cloud-status-indicator');
            if (!indicator) return;

            const connected = [];
            if (dropbox) connected.push('Dropbox');
            if (drive) connected.push('Drive');

            if (connected.length === 0) {
                indicator.textContent = '연결된 서비스 없음';
                indicator.style.color = '#dc3545';
            } else {
                indicator.textContent = connected.join(', ') + ' 연결됨';
                indicator.style.color = '#28a745';
            }

            // Update button styles
            updateCloudButtonStyle('dropbox-btn', dropbox);
            updateCloudButtonStyle('googledrive-btn', drive);
        }

        function updateCloudButtonStyle(buttonId, connected) {
            const button = document.getElementById(buttonId);
            if (!button) return;

            if (connected) {
                // Connected state - filled button
                if (buttonId === 'dropbox-btn') {
                    button.className = 'btn btn-sm';
                    button.style.cssText = 'background: #0061ff; color: white; border: 1px solid #0061ff;';
                } else if (buttonId === 'googledrive-btn') {
                    button.className = 'btn btn-sm';
                    button.style.cssText = 'background: #4285f4; color: white; border: 1px solid #4285f4;';
                }
            } else {
                // Disconnected state - outline button
                if (buttonId === 'dropbox-btn') {
                    button.className = 'btn btn-sm btn-outline-primary';
                    button.style.cssText = '';
                } else if (buttonId === 'googledrive-btn') {
                    button.className = 'btn btn-sm btn-outline-success';
                    button.style.cssText = '';
                }
            }
        }

        function updateStatusBadge(elementId, token) {
            const element = document.getElementById(elementId);
            if (!element) return; // Guard against missing elements
            
            if (token) {
                element.textContent = '연결됨';
                element.style.background = '#28a745';
            } else {
                element.textContent = '연결 안됨';
                element.style.background = '#dc3545';
            }
        }

        // Dropbox Integration
        function connectDropbox() {
            // Check if Dropbox API is loaded
            if (typeof Dropbox === 'undefined') {
                alert('Dropbox API가 로드되지 않았습니다. 페이지를 새로고침 후 다시 시도해주세요.');
                return;
            }
            
            // Since we're using Dropbox Chooser/Saver, connection is automatic
            localStorage.setItem('dropbox_token', 'connected');
            updateCloudStatus();
            alert('Dropbox 연결이 완료되었습니다!');
        }

        function openCloudStorage(provider) {
            const token = localStorage.getItem(provider + '_token');
            if (!token) {
                alert(provider.charAt(0).toUpperCase() + provider.slice(1) + ' 연결이 필요합니다. 설정에서 먼저 연결해주세요.');
                showCloudSetup();
                return;
            }

            // Open file picker
            if (provider === 'dropbox') {
                openDropboxPicker();
            } else if (provider === 'googledrive') {
                openGoogleDrivePicker();
            }
        }

        // Dropbox Integration
        const DROPBOX_APP_KEY = 'ox2nxs1balk4l4i';
        let dropboxInstance = null;
        let dropboxAccessToken = null;
        let isDropboxAuthenticated = false;

        function connectDropbox() {
            // Open server-side OAuth flow in popup
            const popup = window.open('https://3310ffde-0425-4fd5-97c8-2cf58ee38cff.id.replit.app/auth/dropbox', 'dropbox_auth', 'width=500,height=600,scrollbars=yes,resizable=yes');
            
            // Listen for auth completion message
            const messageHandler = (event) => {
                if (event.data.type === 'dropbox_auth_success') {
                    dropboxAccessToken = event.data.token;
                    dropboxInstance = new Dropbox.Dropbox({ accessToken: dropboxAccessToken });
                    isDropboxAuthenticated = true;
                    localStorage.setItem('dropbox_token', 'connected');
                    localStorage.setItem('dropbox_access_token', dropboxAccessToken);
                    updateCloudStatus();
                    alert('Dropbox 연결이 완료되었습니다!');
                    closeCloudSetup();
                    window.removeEventListener('message', messageHandler);
                } else if (event.data.type === 'dropbox_auth_error') {
                    alert('Dropbox 연결에 실패했습니다: ' + event.data.error);
                    window.removeEventListener('message', messageHandler);
                }
            };
            
            window.addEventListener('message', messageHandler);
        }

        function openDropboxPicker() {
            if (!isDropboxAuthenticated) {
                alert('Dropbox 연결이 필요합니다. 설정에서 먼저 연결해주세요.');
                showCloudSetup();
                return;
            }

            // List PDF files from Dropbox
            dropboxInstance.filesListFolder({ path: '' })
                .then(response => {
                    const pdfFiles = response.result.entries.filter(file => 
                        file['.tag'] === 'file' && file.name.toLowerCase().endsWith('.pdf')
                    );
                    
                    if (pdfFiles.length > 0) {
                        showDropboxFileList(pdfFiles);
                    } else {
                        alert('Dropbox에서 PDF 파일을 찾을 수 없습니다.');
                    }
                })
                .catch(error => {
                    console.error('Dropbox 파일 목록 오류:', error);
                    alert('Dropbox 파일 목록을 가져오는 중 오류가 발생했습니다.');
                });
        }

        function showDropboxFileList(files) {
            const fileList = files.map(file => 
                `<li style="cursor: pointer; padding: 8px; border-bottom: 1px solid #eee;" onclick="selectDropboxFile('${file.path_lower}', '${file.name}')">
                    <strong>${file.name}</strong><br>
                    <small>크기: ${file.size ? formatFileSize(file.size) : '알 수 없음'}</small>
                </li>`
            ).join('');

            const modal = document.createElement('div');
            modal.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; display: flex; align-items: center; justify-content: center;">
                    <div style="background: white; border-radius: 12px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;">
                        <div style="padding: 20px; border-bottom: 1px solid #eee;">
                            <h3 style="margin: 0;">Dropbox PDF 파일 선택</h3>
                        </div>
                        <ul style="list-style: none; padding: 0; margin: 0;">${fileList}</ul>
                        <div style="padding: 20px; text-align: right;">
                            <button onclick="this.closest('div').parentElement.remove()" style="padding: 8px 16px; background: #ccc; border: none; border-radius: 4px; cursor: pointer;">취소</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function selectDropboxFile(filePath, fileName) {
            // Close the modal
            document.querySelector('[style*="position: fixed"]').remove();

            // Download file from Dropbox
            dropboxInstance.filesDownload({ path: filePath })
                .then(response => {
                    const blob = response.result.fileBinary;
                    const file = new File([blob], fileName, { type: 'application/pdf' });
                    
                    // Use the existing PDF tool's file handler
                    if (window.pdfImageTool) {
                        window.pdfImageTool.handleFileSelect(file);
                    }
                })
                .catch(error => {
                    console.error('Dropbox 파일 다운로드 오류:', error);
                    alert('Dropbox에서 파일을 다운로드하는 중 오류가 발생했습니다.');
                });
        }

        // Google Drive Integration
        const GOOGLE_CLIENT_ID = '330202967434-9u0gnm9ud2f3oasfp0npn6br4h93qs8i.apps.googleusercontent.com';
        const GOOGLE_SCOPES = 'https://www.googleapis.com/auth/drive.file';
        let googleAuthInstance = null;
        let googleAccessToken = null;
        let isGoogleAuthenticated = false;

        function connectGoogleDrive() {
            // Open server-side OAuth flow in popup
            const popup = window.open('https://3310ffde-0425-4fd5-97c8-2cf58ee38cff.id.replit.app/auth/google', 'google_auth', 'width=500,height=600,scrollbars=yes,resizable=yes');
            
            // Listen for auth completion message
            const messageHandler = (event) => {
                if (event.data.type === 'google_auth_success') {
                    googleAccessToken = event.data.token;
                    if (event.data.refresh_token) {
                        localStorage.setItem('google_refresh_token', event.data.refresh_token);
                    }
                    isGoogleAuthenticated = true;
                    localStorage.setItem('drive_token', 'connected');
                    localStorage.setItem('google_access_token', googleAccessToken);
                    updateCloudStatus();
                    alert('Google Drive 연결이 완료되었습니다!');
                    closeCloudSetup();
                    window.removeEventListener('message', messageHandler);
                } else if (event.data.type === 'google_auth_error') {
                    alert('Google Drive 연결에 실패했습니다: ' + event.data.error);
                    window.removeEventListener('message', messageHandler);
                }
            };
            
            window.addEventListener('message', messageHandler);
        }

        function openGoogleDrivePicker() {
            if (!isGoogleAuthenticated) {
                alert('Google Drive 연결이 필요합니다. 설정에서 먼저 연결해주세요.');
                showCloudSetup();
                return;
            }

            // List PDF files from Google Drive using fetch with access token
            fetch('https://www.googleapis.com/drive/v3/files?q=mimeType%3D%27application/pdf%27&pageSize=20&fields=files(id%2C%20name%2C%20size)', {
                headers: {
                    'Authorization': `Bearer ${googleAccessToken}`
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.files && data.files.length > 0) {
                    showGoogleDriveFileList(data.files);
                } else {
                    alert('Google Drive에서 PDF 파일을 찾을 수 없습니다.');
                }
            })
            .catch(error => {
                console.error('Google Drive 파일 목록 오류:', error);
                alert('Google Drive 파일 목록을 가져오는 중 오류가 발생했습니다.');
            });
        }

        function showGoogleDriveFileList(files) {
            const fileList = files.map(file => 
                `<li style="cursor: pointer; padding: 8px; border-bottom: 1px solid #eee;" onclick="selectGoogleDriveFile('${file.id}', '${file.name}')">
                    <strong>${file.name}</strong><br>
                    <small>크기: ${file.size ? formatFileSize(parseInt(file.size)) : '알 수 없음'}</small>
                </li>`
            ).join('');

            const modal = document.createElement('div');
            modal.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; display: flex; align-items: center; justify-content: center;">
                    <div style="background: white; border-radius: 12px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;">
                        <div style="padding: 20px; border-bottom: 1px solid #eee;">
                            <h3 style="margin: 0;">Google Drive PDF 파일 선택</h3>
                        </div>
                        <ul style="list-style: none; padding: 0; margin: 0;">${fileList}</ul>
                        <div style="padding: 20px; text-align: right;">
                            <button onclick="this.closest('div').parentElement.remove()" style="padding: 8px 16px; background: #ccc; border: none; border-radius: 4px; cursor: pointer;">취소</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function selectGoogleDriveFile(fileId, fileName) {
            // Close the modal
            document.querySelector('[style*="position: fixed"]').remove();

            // Download file from Google Drive using fetch with access token
            fetch(`https://www.googleapis.com/drive/v3/files/${fileId}?alt=media`, {
                headers: {
                    'Authorization': `Bearer ${googleAccessToken}`
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Download failed');
                }
                return response.blob();
            })
            .then(blob => {
                const file = new File([blob], fileName, { type: 'application/pdf' });
                
                // Use the existing PDF tool's file handler
                if (window.pdfImageTool) {
                    window.pdfImageTool.handleFileSelect(file);
                }
            })
            .catch(error => {
                console.error('Google Drive 파일 다운로드 오류:', error);
                alert('Google Drive에서 파일을 다운로드하는 중 오류가 발생했습니다.');
            });
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }



        // Save to Cloud Storage
        function saveToCloud(provider, filename) {
            const pdfTool = window.pdfImageTool;
            if (!pdfTool || !pdfTool.currentDownloadBlob) {
                alert('저장할 파일이 없습니다.');
                return;
            }

            const token = localStorage.getItem(provider + '_token');
            if (!token) {
                alert(`${provider} 연결이 필요합니다.`);
                return;
            }

            if (provider === 'dropbox') {
                saveToDropbox(filename);
            } else if (provider === 'googledrive') {
                saveToGoogleDrive(filename);
            }
        }

        function saveToDropbox(filename) {
            if (!isDropboxAuthenticated) {
                alert('Dropbox 연결이 필요합니다. 설정에서 먼저 연결해주세요.');
                showCloudSetup();
                return;
            }

            const pdfTool = window.pdfImageTool;
            const blob = pdfTool.currentDownloadBlob;

            if (!blob) {
                alert('저장할 파일이 없습니다. 먼저 파일을 변환하세요.');
                return;
            }

            // Upload file to Dropbox
            dropboxInstance.filesUpload({ 
                path: '/' + filename, 
                contents: blob 
            })
            .then(response => {
                alert(`${filename} 파일이 Dropbox에 성공적으로 저장되었습니다!`);
            })
            .catch(error => {
                console.error('Dropbox 저장 오류:', error);
                alert('Dropbox 저장 중 오류가 발생했습니다.');
            });
        }

        function saveToGoogleDrive(filename) {
            if (!isGoogleAuthenticated) {
                alert('Google Drive 연결이 필요합니다. 설정에서 먼저 연결해주세요.');
                showCloudSetup();
                return;
            }

            const pdfTool = window.pdfImageTool;
            const blob = pdfTool.currentDownloadBlob;

            if (!blob) {
                alert('저장할 파일이 없습니다. 먼저 파일을 변환하세요.');
                return;
            }

            const metadata = { 
                name: filename, 
                mimeType: blob.type 
            };
            const reader = new FileReader();

            reader.onload = () => {
                const base64Data = btoa(reader.result);
                const boundary = '-------314159265358979323846';
                const delimiter = `\r\n--${boundary}\r\n`;
                const closeDelim = `\r\n--${boundary}--`;

                const body =
                    delimiter +
                    'Content-Type: application/json; charset=UTF-8\r\n\r\n' +
                    JSON.stringify(metadata) +
                    delimiter +
                    `Content-Type: ${blob.type}\r\nContent-Transfer-Encoding: base64\r\n\r\n` +
                    base64Data +
                    closeDelim;

                fetch('https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart', {
                    method: 'POST',
                    headers: {
                        Authorization: 'Bearer ' + googleAccessToken,
                        'Content-Type': 'multipart/related; boundary=' + boundary
                    },
                    body: body
                })
                .then(res => res.json())
                .then(data => {
                    if (data.id) {
                        alert(`${filename} 파일이 Google Drive에 성공적으로 저장되었습니다!`);
                    } else {
                        throw new Error('Upload failed: ' + JSON.stringify(data));
                    }
                })
                .catch(error => {
                    console.error('Google Drive 저장 오류:', error);
                    alert('Google Drive 저장 중 오류가 발생했습니다.');
                });
            };

            reader.readAsBinaryString(blob);
        }



        // Handle OAuth callbacks and token storage
        function handleOAuthCallback() {
            // Handle Dropbox OAuth callback
            if (window.location.hash.includes('access_token')) {
                const params = new URLSearchParams(window.location.hash.substr(1));
                dropboxAccessToken = params.get('access_token');
                if (dropboxAccessToken) {
                    dropboxInstance = new Dropbox.Dropbox({ accessToken: dropboxAccessToken });
                    isDropboxAuthenticated = true;
                    localStorage.setItem('dropbox_token', 'connected');
                    localStorage.setItem('dropbox_access_token', dropboxAccessToken);
                    
                    // Clear the hash from URL
                    history.replaceState(null, null, ' ');
                    updateCloudStatus();
                    alert('Dropbox 로그인이 완료되었습니다!');
                }
            }
        }

        // Initialize cloud connections on page load
        function initializeCloudConnections() {
            // Handle OAuth callback first
            handleOAuthCallback();
            
            // Check stored tokens
            const storedDropboxToken = localStorage.getItem('dropbox_access_token');
            if (storedDropboxToken && typeof Dropbox !== 'undefined') {
                dropboxAccessToken = storedDropboxToken;
                dropboxInstance = new Dropbox.Dropbox({ accessToken: dropboxAccessToken });
                isDropboxAuthenticated = true;
                localStorage.setItem('dropbox_token', 'connected');
            }
            
            // Check stored Google tokens
            const storedGoogleToken = localStorage.getItem('google_access_token');
            if (storedGoogleToken) {
                googleAccessToken = storedGoogleToken;
                isGoogleAuthenticated = true;
                localStorage.setItem('drive_token', 'connected');
            }
            
            // Update the UI
            updateCloudStatus();
        }

        // Handle GDPR consent banner visibility
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize cloud connections
            initializeCloudConnections();
            
            const consent = localStorage.getItem('gdpr-consent');
            const consentDetails = localStorage.getItem('gdpr-consent-details');
            const banner = document.getElementById('consent-banner');
            
            if (consent === 'accepted') {
                gtag('consent', 'update', {
                    ad_storage: 'granted',
                    analytics_storage: 'granted'
                });
                banner.style.display = 'none';
            } else if (consent === 'rejected') {
                gtag('consent', 'update', {
                    ad_storage: 'denied',
                    analytics_storage: 'denied'
                });
                banner.style.display = 'none';
            } else if (consent === 'custom' && consentDetails) {
                const settings = JSON.parse(consentDetails);
                gtag('consent', 'update', {
                    ad_storage: settings.advertising ? 'granted' : 'denied',
                    analytics_storage: settings.analytics ? 'granted' : 'denied'
                });
                banner.style.display = 'none';
            } else {
                banner.style.display = 'block';
            }
        });
    </script>

    <!-- Accessibility Error System -->
    <script src="error-messages.js"></script>
    
    <!-- Language Selector Container -->
    <div id="language-selector-container" style="position: fixed; top: 20px; left: 20px; z-index: 9999;">
        <!-- Language selector will be inserted here -->
    </div>
</body>
</html>
